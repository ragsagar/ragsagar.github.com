<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>r4g54g4r's h4ckl0g</title>
	<meta name="description" content="">
	<meta name="author" content="Rag Sagar.V">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="./theme/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="./theme/bootstrap.min.css" rel="stylesheet">
	<link href="./theme/local.css" rel="stylesheet">
	<link href="./theme/pygments.css" rel="stylesheet">
	
<script>var _gaq=[['_setAccount','UA-35491289-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>

	
<script type="text/javascript">
	var disqus_identifier = "now-playing-script-for-pidgin-and-audacious.html";
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://ragsagar.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>

</head>
<body>
	
	
<a href="http://github.com/ragsagar"><img style="position: absolute; top: 39px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>

	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="./index.html">r4g54g4r's h4ckl0g</a>
			<ul class="nav">
				
				
					
				
				
					<li ><a href="./category/blog.html">Blog</a></li>
				
					<li ><a href="./category/gnulinux-howtos.html">Gnu/Linux, Howtos</a></li>
				
					<li ><a href="./category/gnulinux-howtos-python-scripts.html">Gnu/Linux, Howtos, Python, Scripts</a></li>
				
					<li ><a href="./category/gnulinux-my-thoughts.html">Gnu/Linux, My Thoughts</a></li>
				
					<li ><a href="./category/gnulinux-my_works-python-scripts.html">Gnu/Linux, My_Works, Python, Scripts</a></li>
				
					<li class="active"><a href="./category/gnulinux-my_works-python-scripts-shell-scripts.html">Gnu/Linux, My_Works, Python, Scripts, Shell Scripts</a></li>
				
					<li ><a href="./category/gnulinux-scripts-shell-scripts.html">Gnu/Linux, Scripts, Shell Scripts</a></li>
				
					<li ><a href="./category/howtos.html">Howtos</a></li>
				
					<li ><a href="./category/howtos-python-scripts.html">Howtos, Python, Scripts</a></li>
				
					<li ><a href="./category/my-thoughts.html">My Thoughts</a></li>
				
					<li ><a href="./category/my_works-python-scripts.html">My_Works, Python, Scripts</a></li>
				
					<li ><a href="./category/my_works-scripts.html">My_Works, Scripts</a></li>
				
					<li ><a href="./category/python-scripts.html">Python, Scripts</a></li>
				
					<li ><a href="./category/scripts.html">Scripts</a></li>
				
					<li ><a href="./category/scripts-shell-scripts.html">Scripts, Shell Scripts</a></li>
				
					<li ><a href="./category/uncategorized.html">Uncategorized</a></li>
				
					<li ><a href="./category/django-howtos-python.html">django, Howtos, Python</a></li>
				
					<li ><a href="./category/misc.html">misc</a></li>
				
			</ul>
			<p class="pull-right"><a href="./archives.html">[archives]</a> <a href="./tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">	
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				
				<li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
				
				<li><a href="http://python.org">Python.org</a></li>
				
				<li><a href="http://ragsagar.wordpress.com">Wordpress Blog</a></li>
				
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				
				<li><a href="http://twitter.com/ragsagar">Twitter</a></li>
				
				<li><a href="http://facebook.com/ragsagar">Facebook</a></li>
				
				<li><a href="http://github.com/ragsagar">Github</a></li>
				
				<li><a href="http://flickr.com/ragsagar">Flickr</a></li>
				
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
			
			
	<div class='article'>
		<div class="page-header"><h1>Now Playing script for pidgin and audacious</h1></div>
		<div class="well small">Permalink: <a class="more" href="./now-playing-script-for-pidgin-and-audacious.html">2008-11-21 22:39:00</a>
by <a class="url fn" href="./author/rag-sagarv.html">Rag Sagar.V</a>
in <a href="./category/gnulinux-my_works-python-scripts-shell-scripts.html">Gnu/Linux, My_Works, Python, Scripts, Shell Scripts</a>
tags: <a href="./tag/audacious.html">Audacious</a> <a href="./tag/dbus.html">dbus</a> <a href="./tag/now-playing.html">Now Playing</a> <a href="./tag/pidgin.html">Pidgin</a> <a href="./tag/py-dbus.html">Py-dbus</a> <a href="./tag/python.html">Python</a> </div>
		<div><p><p>Few days ago i wrote a script to update the status message in pidgin
with the title of the song playing in audacious music player.It is
written in python.it makes use of the dbus for the inter application
communication.when you invoke that script it just appends the title of
the song currently playing in audacious as the status message in pidgin
.i used the shell command $watch to invoke it in every 30 seconds so
that the status message gets updated with the songtitle within 30
seconds after the song change.You can reduce the number of seconds so
that the status message gets updated frequently reducing the time delay
between the song change and updation of status message.What the script
does is, it retrieves the song title from the audacious music player
using dbus.Then this songtitle is assigned as the status message in
pidgin by communicating through dbus.This script needs dbus and
py-dbus.So make sure that you have both packages installed in your
system. Here is the script :</p>
<blockquote>
def set_message(message): # Get current status type
(Available/Away/etc.) current =
purple.PurpleSavedstatusGetType(purple.PurpleSavedstatusGetCurrent())
# Create new transient status and activate it status =
purple.PurpleSavedstatusNew(&quot;&quot;, current) msg=&quot;Now Playing: &quot;
emsg=msg+message purple.PurpleSavedstatusSetMessage(status, emsg)
purple.PurpleSavedstatusActivate(status) import dbus
session_bus=dbus.SessionBus() proxy =
session_bus.get_object(&quot;im.pidgin.purple.PurpleService&quot;,
&quot;/im/pidgin/purple/PurpleObject&quot;) purple = dbus.Interface(proxy,
&quot;im.pidgin.purple.PurpleInterface&quot;) proxy1 =
session_bus.get_object('org.mpris.audacious','/TrackList') purple1
= dbus.Interface(proxy1,'org.freedesktop.MediaPlayer') ct =
purple1.GetCurrentTrack() proxy2 =
session_bus.get_object('org.mpris.audacious','/org/atheme/audacious')
purple2 = dbus.Interface(proxy2,'org.atheme.audacious') currentsong
= purple2.SongTitle(ct) print currentsong set_message(currentsong)</blockquote>
<p>Running this script will update the status message just once , so u have
to shell command $watch as i said earlier.if you dont want to do this
things manually, dont worry! i got package for this, grab it from here
<a class="reference external" href="http://ragsagar.freehostia.com/pidgin-audacious_plugin.tar.gz">http://ragsagar.freehostia.com/pidgin-audacious_plugin.tar.gz</a> , untar
it and run the installer..</p>
<blockquote>
$wget <a class="reference external" href="http://ragsagar.freehostia.com/pidgin-audacious_plugin.tar.gz">http://ragsagar.freehostia.com/pidgin-audacious_plugin.tar.gz</a>
$tar -xvf pidgin-audacious_plugin.tar.gz $cd pidgin-audacious\
plugin/ $sudo chmod a+x installer $./installer</blockquote>
<p>Now run the script using this command :</p>
<blockquote>
$pidgin-plugin</blockquote>
<p>PS: Make sure that you have both audacious and pidgin already running</p>
</p></div>
		<div>
			<h2>Comments</h2>
		 	
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="ragsagar">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

			<div id="disqus_thread"></div>
			
		<div>
	</div>	

		<footer>
		  <p> Powered by <a href="http://alexis.notmyidea.org/pelican/">Pelican</a>, theme based on <a href="http://twitter.github.com/bootstrap/">Bootstrap, from Twitter</a>.</p>
		  <p>&copy; Rag Sagar.V 2011</p>
		</footer>
	  </div>
   
	</div>
</body>
</html>